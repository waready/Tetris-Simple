(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();const a=document.querySelector("canvas"),c=a.getContext("2d"),S=document.querySelector("span"),y=document.querySelector("section"),p=20,h=14,v=30;let g=0;a.width=p*h;a.height=p*v;c.scale(p,p);const f=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0]],e={position:{x:5,y:5},shape:[[1,1],[1,1]]},m=[[[1,1],[1,1]],[[1,1,1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[1,0],[1,0],[1,1]],[[0,1],[0,1],[1,1]]];let d=0,w=0;function E(o=0){const i=o-w;w=o,d+=i,d>1e3&&(e.position.y++,d=0,l()&&(e.position.y--,x(),A())),L(),window.requestAnimationFrame(E)}function L(){c.fillStyle="#000",c.fillRect(0,0,a.width,a.height),f.forEach((o,i)=>{o.forEach((r,n)=>{r===1&&(c.fillStyle="yellow",c.fillRect(n,i,1,1))})}),e.shape.forEach((o,i)=>{o.forEach((r,n)=>{r===1&&(c.fillStyle="red",c.fillRect(n+e.position.x,i+e.position.y,1,1))})}),S.innerText=g}document.addEventListener("keydown",o=>{if(o.key=="ArrowLeft"&&(e.position.x--,l()&&e.position.x++),o.key=="ArrowRight"&&(e.position.x++,l()&&e.position.x--),o.key=="ArrowDown"&&(e.position.y++,l()&&(e.position.y--,x(),A())),o.key=="ArrowUp"){const i=[];for(let n=0;n<e.shape[0].length;n++){const t=[];for(let s=e.shape.length-1;s>=0;s--)t.push(e.shape[s][n]);i.push(t)}const r=e.shape;e.shape=i,l()&&(e.shape=r)}});function l(){return e.shape.find((o,i)=>o.find((r,n)=>{var t;return r!=0&&((t=f[i+e.position.y])==null?void 0:t[n+e.position.x])!=0}))}function x(){e.shape.forEach((o,i)=>{o.forEach((r,n)=>{r==1&&(f[i+e.position.y][n+e.position.x]=r)})}),e.position.x=Math.floor(h/2-2),e.position.y=0,e.shape=m[Math.floor(Math.random()*m.length)],l()&&(window.alert("gamer over!!"),f.forEach(o=>o.fill(0)))}function A(){const o=[];f.forEach((i,r)=>{i.every(n=>n==1)&&o.push(r)}),o.forEach(i=>{f.splice(i,1);const r=Array(h).fill(0);f.unshift(r),g+=10})}y.addEventListener("click",()=>{E(),y.remove();const o=new window.Audio("./Tetris.mp3");o.volume=.5,o.play()});
